<form id="questionForm" data-question-id="<%= question?._id || '' %>" data-quiz-id="<%= quizId %>">
    <input type="hidden" name="quizId" value="<%= quizId %>">
    <div class="mb-3">
        <label for="questionText" class="form-label">Текст вопроса</label>
        <input type="text" class="form-control" id="questionText" name="text" value="<%= question?.text || '' %>" required>
    </div>
    <div class="mb-3">
        <label for="questionType" class="form-label">Тип вопроса</label>
        <select class="form-select" id="questionType" name="type" required>
            <option value="single" <%= question?.type === 'single' ? 'selected' : '' %>>Один вариант</option>
            <option value="multiple" <%= question?.type === 'multiple' ? 'selected' : '' %>>Несколько вариантов</option>
            <option value="truefalse" <%= question?.type === 'truefalse' ? 'selected' : '' %>>Верно/Неверно</option>
            <option value="text" <%= question?.type === 'text' ? 'selected' : '' %>>Свободный ответ</option>
        </select>
    </div>
    <div class="mb-3" id="textAnswerContainer" style="display: <%= question?.type === 'text' ? 'block' : 'none' %>;">
        <label for="textCorrectAnswer" class="form-label">Правильный ответ</label>
        <input type="text" class="form-control" id="textCorrectAnswer" name="textCorrectAnswer" value="<%= (question?.type === 'text' && question?.options?.[0]?.text) ? question.options[0].text : '' %>">
        <div class="form-text">Ответ будет сравниваться без учёта регистра и пробелов.</div>
    </div>
    <!-- Здесь можно добавить динамическое добавление вариантов ответа через JS -->
    <div id="optionsContainer"></div>
</form>

<script>
// Показывать/скрывать поле правильного ответа для text-вопроса
const typeSelect = document.getElementById('questionType');
const textAnswerContainer = document.getElementById('textAnswerContainer');
typeSelect?.addEventListener('change', function() {
    if (this.value === 'text') {
        textAnswerContainer.style.display = 'block';
    } else {
        textAnswerContainer.style.display = 'none';
    }
});
</script> 