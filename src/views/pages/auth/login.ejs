<h1 class="h3 mb-4">Вход</h1>
<%- include('../../partials/flash') %>

<form action="/login" method="POST" class="needs-validation" novalidate>
    <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input
                id="email"
                name="email"
                type="email"
                class="form-control"
                placeholder="you@example.com"
                value="<%= oldData?.email || '' %>"
                required
        >
        <div class="invalid-feedback">Нужен валидный email.</div>
    </div>

    <div class="mb-4">
        <label for="password" class="form-label">Пароль</label>
        <input
                id="password"
                name="password"
                type="password"
                class="form-control"
                required
        >
        <div class="invalid-feedback">Введите пароль.</div>
    </div>

    <button type="submit" class="btn btn-primary w-100">Войти</button>
</form>

<p class="mt-3 text-center">
    Нет аккаунта? <a href="/register" class="link-light">Зарегистрироваться</a>
</p>

<script>
    // такой же скрипт валидации, можно вынести в общий partial
    (() => {
        'use strict'
        const forms = document.querySelectorAll('.needs-validation')
        Array.from(forms).forEach(f => {
            f.addEventListener('submit', e => {
                if (!f.checkValidity()) {
                    e.preventDefault()
                    e.stopPropagation()
                }
                f.classList.add('was-validated')
            }, false)
        })
    })()
</script>
