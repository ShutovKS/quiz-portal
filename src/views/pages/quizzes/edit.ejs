<h1 class="h3 mb-4">Редактировать квиз</h1>
<%- include('../../partials/flash') %>

<form
        action="/quizzes/<%= quiz._id %>?_method=PUT"
        method="POST"
        class="needs-validation"
        novalidate
>
    <div class="mb-3">
        <label for="title" class="form-label">Название</label>
        <input
                id="title"
                type="text"
                name="title"
                class="form-control"
                value="<%= quiz.title %>"
                required
        >
        <div class="invalid-feedback">Нужно название.</div>
    </div>

    <div class="mb-3">
        <label for="description" class="form-label">Описание</label>
        <textarea
                id="description"
                name="description"
                class="form-control"
                rows="3"
        ><%= quiz.description %></textarea>
    </div>

    <div class="form-check mb-4">
        <input
                id="isPublic"
                class="form-check-input"
                type="checkbox"
                name="isPublic"
                <%= quiz.isPublic ? 'checked' : '' %>
        >
        <label class="form-check-label" for="isPublic">
            Публичный квиз
        </label>
    </div>

    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>

<hr class="border-secondary">

<h2 class="h5 mb-3">Вопросы квиза</h2>
<ul class="list-group mb-3">
    <% questions.forEach(q => { %>
        <li class="list-group-item list-group-item-dark d-flex justify-content-between align-items-center">
            <span><%= q.text %> (<%= q.type %>)</span>
            <!-- CRUD ссылки -->
            <div>
                <a href="/quizzes/<%= quiz._id %>/questions/<%= q._id %>/edit"
                   class="btn btn-sm btn-outline-light me-2">Ред.</a>
                <form
                        action="/quizzes/<%= quiz._id %>/questions/<%= q._id %>?_method=DELETE"
                        method="POST"
                        style="display:inline"
                >
                    <button class="btn btn-sm btn-outline-danger">Удалить</button>
                </form>
            </div>
        </li>
    <% }) %>
</ul>

<a href="/quizzes/<%= quiz._id %>/questions/new" class="btn btn-outline-light">
    + Добавить вопрос
</a>
